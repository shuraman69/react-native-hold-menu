{"version":3,"sources":["Content.tsx"],"names":["React","useState","Animated","runOnJS","useAnimatedReaction","useAnimatedStyle","withSpring","withTiming","useInternal","CONTEXT_MENU_STATE","HOLD_ITEM_TRANSFORM_DURATION","SPRING_CONFIGURATION","Content","renderContent","state","menuProps","isActive","setIsActive","value","val","ACTIVE","wrapperStyles","anchorPositionVertical","anchorPosition","split","top","itemY","itemHeight","left","itemX","tY","transformValue","opacity","transform","translateY","duration","position","zIndex"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,QAAP,IACEC,OADF,EAEEC,mBAFF,EAGEC,gBAHF,EAIEC,UAJF,EAKEC,UALF,QAMO,yBANP;AAOA,SAASC,WAAT,QAA4B,aAA5B;AACA,SACEC,kBADF,EAEEC,4BAFF,EAGEC,oBAHF,QAIO,iBAJP;;AAMA,MAAMC,OAAO,GAAG,CAAC;AACfC,EAAAA;AADe,CAAD,KAIV;AACJ,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAuBP,WAAW,EAAxC;AACA,QAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BhB,QAAQ,CAAC,KAAD,CAAxC,CAFI,CAIJ;;AACAG,EAAAA,mBAAmB,CACjB,MAAMU,KAAK,CAACI,KADK,EAEjBC,GAAG,IAAI;AACLhB,IAAAA,OAAO,CAACc,WAAD,CAAP,CAAqBE,GAAG,KAAKV,kBAAkB,CAACW,MAAhD;AACD,GAJgB,CAAnB;AAMA,QAAMC,aAAa,GAAGhB,gBAAgB,CAAC,MAAM;AAC3C,UAAMiB,sBAAsB,GAAGP,SAAS,CAACG,KAAV,CAAgBK,cAAhB,CAA+BC,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAA/B;AAEA,UAAMC,GAAG,GACPH,sBAAsB,KAAK,KAA3B,GACIP,SAAS,CAACG,KAAV,CAAgBQ,KAAhB,GAAwB,EAD5B,GAEIX,SAAS,CAACG,KAAV,CAAgBQ,KAAhB,GAAwBX,SAAS,CAACG,KAAV,CAAgBS,UAAxC,GAAqD,CAH3D;AAKA,UAAMC,IAAI,GAAGb,SAAS,CAACG,KAAV,CAAgBW,KAA7B;AACA,UAAMC,EAAE,GAAGf,SAAS,CAACG,KAAV,CAAgBa,cAA3B;AACA,WAAO;AACLC,MAAAA,OAAO,EACLlB,KAAK,CAACI,KAAN,KAAgBT,kBAAkB,CAACW,MAAnC,GACIb,UAAU,CAAC,CAAD,CADd,GAEIA,UAAU,CAAC,CAAD,CAJX;AAKLkB,MAAAA,GALK;AAMLG,MAAAA,IANK;AAOLK,MAAAA,SAAS,EAAE,CACT;AACEC,QAAAA,UAAU,EACRpB,KAAK,CAACI,KAAN,KAAgBT,kBAAkB,CAACW,MAAnC,GACId,UAAU,CAACwB,EAAD,EAAKnB,oBAAL,CADd,GAEIJ,UAAU,CAAC,CAAD,EAAI;AAAE4B,UAAAA,QAAQ,EAAEzB;AAAZ,SAAJ;AAJlB,OADS;AAPN,KAAP;AAgBD,GA1BqC,EA0BnC,CAACK,SAAD,CA1BmC,CAAtC;;AA2BA,MAAI,CAACF,aAAL,EAAoB;AAClB,WAAO,IAAP;AACD;;AACD,sBACE,oBAAC,QAAD,CAAU,IAAV;AACE,IAAA,KAAK,EAAE,CAAC;AAAEuB,MAAAA,QAAQ,EAAE,UAAZ;AAAwBR,MAAAA,IAAI,EAAE,CAA9B;AAAiCS,MAAAA,MAAM,EAAE;AAAzC,KAAD,EAAgDhB,aAAhD;AADT,KAGGL,QAAQ,IAAIH,aAAa,EAH5B,CADF;AAOD,CApDD;;AAsDA,eAAeD,OAAf","sourcesContent":["import React, { useState } from 'react';\nimport Animated, {\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedStyle,\n  withSpring,\n  withTiming,\n} from 'react-native-reanimated';\nimport { useInternal } from '../../hooks';\nimport {\n  CONTEXT_MENU_STATE,\n  HOLD_ITEM_TRANSFORM_DURATION,\n  SPRING_CONFIGURATION,\n} from '../../constants';\n\nconst Content = ({\n  renderContent,\n}: {\n  renderContent?: () => React.ReactNode;\n}) => {\n  const { state, menuProps } = useInternal();\n  const [isActive, setIsActive] = useState(false);\n\n  // синхронизируем Reanimated state → React state\n  useAnimatedReaction(\n    () => state.value,\n    val => {\n      runOnJS(setIsActive)(val === CONTEXT_MENU_STATE.ACTIVE);\n    }\n  );\n  const wrapperStyles = useAnimatedStyle(() => {\n    const anchorPositionVertical = menuProps.value.anchorPosition.split('-')[0];\n\n    const top =\n      anchorPositionVertical === 'top'\n        ? menuProps.value.itemY - 24\n        : menuProps.value.itemY + menuProps.value.itemHeight + 8;\n\n    const left = menuProps.value.itemX;\n    const tY = menuProps.value.transformValue;\n    return {\n      opacity:\n        state.value === CONTEXT_MENU_STATE.ACTIVE\n          ? withTiming(1)\n          : withTiming(0),\n      top,\n      left,\n      transform: [\n        {\n          translateY:\n            state.value === CONTEXT_MENU_STATE.ACTIVE\n              ? withSpring(tY, SPRING_CONFIGURATION)\n              : withTiming(0, { duration: HOLD_ITEM_TRANSFORM_DURATION }),\n        },\n      ],\n    };\n  }, [menuProps]);\n  if (!renderContent) {\n    return null;\n  }\n  return (\n    <Animated.View\n      style={[{ position: 'absolute', left: 0, zIndex: 12 }, wrapperStyles]}\n    >\n      {isActive && renderContent()}\n    </Animated.View>\n  );\n};\n\nexport default Content;\n"]}