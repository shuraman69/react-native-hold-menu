{"version":3,"sources":["Content.tsx"],"names":["Content","renderContent","state","menuProps","isActive","setIsActive","value","val","CONTEXT_MENU_STATE","ACTIVE","wrapperStyles","anchorPositionVertical","anchorPosition","split","top","itemY","itemHeight","left","itemX","tY","transformValue","opacity","transform","translateY","SPRING_CONFIGURATION","duration","HOLD_ITEM_TRANSFORM_DURATION","position","zIndex"],"mappings":";;;;;;;AAAA;;AACA;;AAOA;;AACA;;;;;;AAMA,MAAMA,OAAO,GAAG,CAAC;AACfC,EAAAA;AADe,CAAD,KAIV;AACJ,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAuB,yBAA7B;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0B,qBAAS,KAAT,CAAhC,CAFI,CAIJ;;AACA,kDACE,MAAMH,KAAK,CAACI,KADd,EAEEC,GAAG,IAAI;AACL,wCAAQF,WAAR,EAAqBE,GAAG,KAAKC,8BAAmBC,MAAhD;AACD,GAJH;AAMA,QAAMC,aAAa,GAAG,6CAAiB,MAAM;AAC3C,UAAMC,sBAAsB,GAAGR,SAAS,CAACG,KAAV,CAAgBM,cAAhB,CAA+BC,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAA/B;AAEA,UAAMC,GAAG,GACPH,sBAAsB,KAAK,KAA3B,GACIR,SAAS,CAACG,KAAV,CAAgBS,KAAhB,GAAwB,EAD5B,GAEIZ,SAAS,CAACG,KAAV,CAAgBS,KAAhB,GAAwBZ,SAAS,CAACG,KAAV,CAAgBU,UAAxC,GAAqD,CAH3D;AAKA,UAAMC,IAAI,GAAGd,SAAS,CAACG,KAAV,CAAgBY,KAA7B;AACA,UAAMC,EAAE,GAAGhB,SAAS,CAACG,KAAV,CAAgBc,cAA3B;AACA,WAAO;AACLC,MAAAA,OAAO,EACLnB,KAAK,CAACI,KAAN,KAAgBE,8BAAmBC,MAAnC,GACI,uCAAW,CAAX,CADJ,GAEI,uCAAW,CAAX,CAJD;AAKLK,MAAAA,GALK;AAMLG,MAAAA,IANK;AAOLK,MAAAA,SAAS,EAAE,CACT;AACEC,QAAAA,UAAU,EACRrB,KAAK,CAACI,KAAN,KAAgBE,8BAAmBC,MAAnC,GACI,uCAAWU,EAAX,EAAeK,+BAAf,CADJ,GAEI,uCAAW,CAAX,EAAc;AAAEC,UAAAA,QAAQ,EAAEC;AAAZ,SAAd;AAJR,OADS;AAPN,KAAP;AAgBD,GA1BqB,EA0BnB,CAACvB,SAAD,CA1BmB,CAAtB;;AA2BA,MAAI,CAACF,aAAL,EAAoB;AAClB,WAAO,IAAP;AACD;;AACD,sBACE,6BAAC,8BAAD,CAAU,IAAV;AACE,IAAA,KAAK,EAAE,CAAC;AAAE0B,MAAAA,QAAQ,EAAE,UAAZ;AAAwBV,MAAAA,IAAI,EAAE,CAA9B;AAAiCW,MAAAA,MAAM,EAAE;AAAzC,KAAD,EAAgDlB,aAAhD;AADT,KAGGN,QAAQ,IAAIH,aAAa,EAH5B,CADF;AAOD,CApDD;;eAsDeD,O","sourcesContent":["import React, { useState } from 'react';\nimport Animated, {\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedStyle,\n  withSpring,\n  withTiming,\n} from 'react-native-reanimated';\nimport { useInternal } from '../../hooks';\nimport {\n  CONTEXT_MENU_STATE,\n  HOLD_ITEM_TRANSFORM_DURATION,\n  SPRING_CONFIGURATION,\n} from '../../constants';\n\nconst Content = ({\n  renderContent,\n}: {\n  renderContent?: () => React.ReactNode;\n}) => {\n  const { state, menuProps } = useInternal();\n  const [isActive, setIsActive] = useState(false);\n\n  // синхронизируем Reanimated state → React state\n  useAnimatedReaction(\n    () => state.value,\n    val => {\n      runOnJS(setIsActive)(val === CONTEXT_MENU_STATE.ACTIVE);\n    }\n  );\n  const wrapperStyles = useAnimatedStyle(() => {\n    const anchorPositionVertical = menuProps.value.anchorPosition.split('-')[0];\n\n    const top =\n      anchorPositionVertical === 'top'\n        ? menuProps.value.itemY - 24\n        : menuProps.value.itemY + menuProps.value.itemHeight + 8;\n\n    const left = menuProps.value.itemX;\n    const tY = menuProps.value.transformValue;\n    return {\n      opacity:\n        state.value === CONTEXT_MENU_STATE.ACTIVE\n          ? withTiming(1)\n          : withTiming(0),\n      top,\n      left,\n      transform: [\n        {\n          translateY:\n            state.value === CONTEXT_MENU_STATE.ACTIVE\n              ? withSpring(tY, SPRING_CONFIGURATION)\n              : withTiming(0, { duration: HOLD_ITEM_TRANSFORM_DURATION }),\n        },\n      ],\n    };\n  }, [menuProps]);\n  if (!renderContent) {\n    return null;\n  }\n  return (\n    <Animated.View\n      style={[{ position: 'absolute', left: 0, zIndex: 12 }, wrapperStyles]}\n    >\n      {isActive && renderContent()}\n    </Animated.View>\n  );\n};\n\nexport default Content;\n"]}